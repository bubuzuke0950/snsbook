# 9.2. Simulation of bipedal locomotion

## Files
- `main.c`: main functino
- `os.c`: Central pattern generator
- `ms.c`: Musculoskeletal model
- `mat.c`: Matrix manipulation
- `misc.c`: Some general functions
- `header.h`: Parameter definitions
- `healper/`: Helper scripts for data editing and visualization
- `Makefile`: Makefile
- `README-ja.md`: Description in Japanese
- `README-en.md`: Description in English (this file)

## Description
This code reimplements Taga et al. (1991) using spiking neurons. The original paper is downloadable
from the following URL, so please check for further details. Note that it is a bit difficult to
reimplement the model from the original paper.

[Taga et al. (1991) Self-organized control of bipedal locomotion by neural oscillators in unpredictable environment. Biol Cybern 65: 147--159.](https://api.semanticscholar.org/CorpusID:5262616)

To create a movie of locomotion, [ffmpeg](https://www.ffmpeg.org/)と[zsh](https://zsh.prg) is necessary.
Please install beforehand. Ruby programming language is also necessary, because helper scripts are
written in Ruby.

## How to compile
Just do `make`. Then executable file `main` is generated.

## How to run
Just do `make run`. Then, the following data are generated:
- `ms.dat`: Posture of the musculoskeletal model
- `os.dat`: Activity of CPG
- `os_pp.dat`: Printable version of `os.dat` (generated by `helper/os_pp.rb`)
- `sp.dat`: Membrane potetials of neurons in CPG
- `sp_pp.dat`: Printable version of `sp.dat` (generated by `helper/sp_pp.rb`)
- `ankle.dat`: Foot position ((x, y) positions of left and right foot)
- `stick.dat`: Stick diagram calculated from `ms.dat` (generated by `helper/stick.rb`)
- `aminate.mp4`: Movie of locomotion (generated from `stick.dat` by `helper/animate.rb` and `helper/animate_post.zsh`)

## How to visualize
Using gnuplot, activity of the CPG is printed by
```
gnuplot> load 'helper/os_pp.gp'
```
This corresponds to Figure 6.A of Taga et al. (1991). Similarly, membrane potentials of neurons in CPG are printed by
```
gnuplot> load 'helper/sp_pp.gp'
```
Furthermore, the stick diagram during locomotion (corresponding to Figure 9.4) is printed by
```
gnuplot> plot 'stick.dat'
```

`animate.mp4` plays a movie during locomotion.

## Acknowledgement
This code is contributed by Dr. Daisuke Ichimura.
